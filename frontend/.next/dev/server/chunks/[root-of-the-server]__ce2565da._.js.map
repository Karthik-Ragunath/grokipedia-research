{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/dpang/dev/grokipedia-research/frontend/app/api/extract-pdf-title/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport pdfParse from 'pdf-parse'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n    const file = formData.get('file') as File\n\n    if (!file) {\n      return NextResponse.json({ error: 'No file provided' }, { status: 400 })\n    }\n\n    if (file.type !== 'application/pdf') {\n      return NextResponse.json({ error: 'File must be a PDF' }, { status: 400 })\n    }\n\n    // Convert File to Buffer\n    const arrayBuffer = await file.arrayBuffer()\n    const buffer = Buffer.from(arrayBuffer)\n\n    // Parse PDF\n    const data = await pdfParse(buffer)\n\n    // Extract title from PDF metadata or first line of text\n    let title = data.info?.Title || ''\n    \n    // If no title in metadata, try to extract from first few lines\n    if (!title && data.text) {\n      const lines = data.text.split('\\n').filter(line => line.trim().length > 0)\n      // Look for title-like text (usually first non-empty line or a line with capital letters)\n      for (const line of lines.slice(0, 10)) {\n        const trimmed = line.trim()\n        // Check if line looks like a title (has some length, not too long, might have capital letters)\n        if (trimmed.length > 10 && trimmed.length < 200) {\n          title = trimmed\n          break\n        }\n      }\n    }\n\n    return NextResponse.json({ title: title.trim() })\n  } catch (error) {\n    console.error('Error extracting PDF title:', error)\n    return NextResponse.json({ error: 'Failed to extract PDF title' }, { status: 500 })\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,IAAI,KAAK,IAAI,KAAK,mBAAmB;YACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QAEA,yBAAyB;QACzB,MAAM,cAAc,MAAM,KAAK,WAAW;QAC1C,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,YAAY;QACZ,MAAM,OAAO,MAAM,IAAA,iLAAQ,EAAC;QAE5B,wDAAwD;QACxD,IAAI,QAAQ,KAAK,IAAI,EAAE,SAAS;QAEhC,+DAA+D;QAC/D,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;YACvB,MAAM,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,GAAG,MAAM,GAAG;YACxE,yFAAyF;YACzF,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC,GAAG,IAAK;gBACrC,MAAM,UAAU,KAAK,IAAI;gBACzB,+FAA+F;gBAC/F,IAAI,QAAQ,MAAM,GAAG,MAAM,QAAQ,MAAM,GAAG,KAAK;oBAC/C,QAAQ;oBACR;gBACF;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,IAAI;QAAG;IACjD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF"}}]
}